import React from "react";
import { ComponentArchitectureArchitectureModuleFeature } from "../../model/autogenerated-graphql-strapi";
import { CodeSnippet } from "../code-snippet/code-snippet";
import sanitizeHtml from 'sanitize-html';
import { MDBCollapse, MDBBtn } from 'mdbreact';
import { MDBIcon } from "mdbreact";


//------------------ TYPES
interface ArchitectureModuleFeatureProps {
  feature: ComponentArchitectureArchitectureModuleFeature;
  firstItem: boolean;
  onAccordionClick: (id:string)=>void;
  isOpen: boolean;
}


//------------------ COMPONENT
export const ArchitectureModuleFeature : React.FC<ArchitectureModuleFeatureProps> = (props:ArchitectureModuleFeatureProps) => {
  
  //----- render
  return (
    <div className={props.firstItem?"mt-3":"mt-5"}>
      <h4 className="text-brand1 clickable" onClick={()=>props.onAccordionClick(props.feature.id)}>{props.feature.title} <MDBIcon icon={`fas ${props.isOpen?"fa-angle-down":"fa-angle-right"}`} /></h4>
      <MDBCollapse id={props.feature.id} isOpen={props.isOpen}>
        {props.feature.description && props.feature.description !== "" && (<div dangerouslySetInnerHTML={{__html: sanitizeHtml(props.feature.description)}} />)}
        {props.feature.codeSnippet && props.feature.codeSnippet.length > 0 && (
          <>
            {props.feature.codeSnippet.map((codeSnippet)=>{
              return <CodeSnippet codeSnippet={codeSnippet!} key={codeSnippet!.id} />
            })}
          </>        
      )}
      </MDBCollapse>
    </div>
  );
}